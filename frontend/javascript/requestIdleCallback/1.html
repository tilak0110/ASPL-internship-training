<!DOCTYPE html>
<html>
<head>
  <title>requestIdleCallback Demo</title>
</head>
<body>
  <h2>‚è≥ Check Console for Idle Callback</h2>

  <script>
    console.log("üî• Main thread running...");

    requestIdleCallback((deadline) => {
      console.log("üòå Browser is idle, let's do some light work...");

      while (deadline.timeRemaining() > 0) {
        console.log(`üïí Time left: ${Math.floor(deadline.timeRemaining())}ms`);
      }

      console.log("‚úÖ Finished light work during idle time.");
    });

    console.log("üõ†Ô∏è Main thread still busy with other work...");

    //For unsupported browsers, fall back to setTimeout:
    window.requestIdleCallback = window.requestIdleCallback || function (cb) {
  return setTimeout(() => {
    const start = Date.now();
    cb({
      didTimeout: false,
      timeRemaining: () => Math.max(0, 50 - (Date.now() - start))
    });
  }, 1);
};

  </script>
</body>
</html>
